# ACCIONES CORRECTIVAS ARRAYANES #
#######LIBRARIES########
libraries <- c('tidyverse', 'lubridate', 'readxl')
lapply(libraries, require, character.only = TRUE)
######LOAD DATA #####
temp <- 'dat/Engine Status Report_20190827_123509.xlsx'
rm(temp)
######LOAD DATA #####
met <- read_excel('dat/Engine Status Report_20190827_123509.xlsx', skip = 4)
str(met)
met
######LOAD DATA #####
met <- read_excel('dat/Engine Status Report_20190827_123509.xlsx', sheet = 'Report',
skip = 4)
str(met+)
str(met+)
str(met)
#####TIDY DATA#######
met %>%
separate(Vehículo, sep = '//s', extra = 'drop')
#####TIDY DATA#######
met %>%
separate(Vehículo, into = 'Unidad', sep = '//s', extra = 'drop')
#####TIDY DATA#######
met %>%
separate(Vehículo, into = 'Unidad', sep = '//s', extra = 'drop') %>% +
select(Unidad, Fecha, Descripción, Valor) %>%
separate(Valor, into = 'valor', sep = '//s', extra = 'drop') %>%
mutate(valor = as.numeric(valor))
#####TIDY DATA#######
met <- met %>%
separate(Vehículo, into = 'Unidad', sep = '//s', extra = 'drop') %>%
separate(Valor, into = 'valor', sep = '//s', extra = 'drop')
met
met$valor
met$Unidad
#####TIDY DATA#######
met <- met %>%
separate(Vehículo, into = 'Unidad', sep = 's//', extra = 'drop') %>%
separate(Valor, into = 'valor', sep = 's//', extra = 'drop')
######LOAD DATA #####
met <- read_excel('dat/Engine Status Report_20190827_123509.xlsx', sheet = 'Report',
skip = 4)
#####TIDY DATA#######
met <- met %>%
separate(Vehículo, into = 'Unidad', sep = 's//', extra = 'drop') %>%
separate(Valor, into = 'valor', sep = 's//', extra = 'drop')
met
met$Unidad
######LOAD DATA #####
met <- read_excel('dat/Engine Status Report_20190827_123509.xlsx', sheet = 'Report',
skip = 4)
#####TIDY DATA#######
met <- met %>%
separate(Vehículo, into = 'Unidad', sep = '\\s', extra = 'drop') %>%
separate(Valor, into = 'valor', sep = '\\s', extra = 'drop')
met$Unidad
met$valor
met <- met %>%
select(Unidad, Fecha, Descripción, Valor) %>%
mutate(valor = as.numeric(valor))
met <- met %>%
select(Unidad, Fecha, Descripción, valor) %>%
mutate(valor = as.numeric(valor))
str(met)
levels(met$Descripción)
met$Descripción
met %>%
group_by(Unidad,Descripción) %>%
filter(Descripción == 'Odómetro') %>%
summarize(km = ((max(valor) - min(valor))/1000))
km <- met %>%
group_by(Unidad,Descripción) %>%
filter(Descripción == 'Odómetro') %>%
summarize(km = ((max(valor) - min(valor))/1000))
met %>%
group_by(Unidad, Descripción) %>%
filter(Descripción == 'Cantidad total de combustible utilizado') %>%
summarize(litros =  max(valor) - min(valor))
l <- met %>%
group_by(Unidad, Descripción) %>%
filter(Descripción == 'Cantidad total de combustible utilizado') %>%
summarize(litros =  max(valor) - min(valor))
######JOIN DATA AND SUMMARIZE###########
met <- full_join(km, l)
met
######JOIN DATA AND SUMMARIZE###########
met <- full_join(km, l, by = Unidad)
######JOIN DATA AND SUMMARIZE###########
met <- full_join(km, l, by = 'Unidad')
mert
met
met <- select(Unidad, km, litros) %>%
mutate(rend_met = km / litros)
met <- select('Unidad', km, litros) %>%
mutate(rend_met = km / litros)
met <- met %>%
select(Unidad, km, litros) %>%
mutate(rend_met = km / litros)
met
met <- met %>%
mutate(rend_obj = case_when(
Unidad == 'S-30' | 'S-33' ~ 3.80,
TRUE ~ 3.60))
met <- met %>%
mutate(rend_obj = case_when(
Unidad == 'S-30' ~ 3.80,
Unidad == 'S-33' ~ 3.80,
TRUE ~ 3.60))
met
met <- met %>%
mutate(litros_obj = km/rend_obj)
met
met <- met %>%
mutate('(+)AHORRO/(-)PÉRDIDA' = litros_obj - litros)
met
write_excel_csv(met,'output/rend.csv')
source('G:/Unidades compartidas/Rendimiento de Combustible/acciones-correctivas/19-AGO/ARRAYANES/1Q/RScript.R', encoding = 'UTF-8', echo=TRUE)
summary(met)
view(met)
install.packages('kable')
install.packages('kableExtra')
library(kableExtra)
met
met %>%
summarize(sum('(+)AHORRO/(-)PÉRDIDA LITROS'))
summarize(sum(`(+)AHORRO/(-)PÉRDIDA LITROS`))
sum(met$`(+)AHORRO/(-)PÉRDIDA LITROS`)
ah_per_quincenal <- sum(met$`(+)AHORRO/(-)PÉRDIDA LITROS`)
install.packages('tinytex')
tinytex::install_tinytex()
tinytex::is_tinytex()
source('G:/Unidades compartidas/Rendimiento de Combustible/acciones-correctivas/19-AGO/ARRAYANES/1Q/RScript.R', encoding = 'UTF-8', echo=TRUE)
